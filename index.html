<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" type="image/png" href="coin.png" />
<title>Survey Form</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#89f7fe,#66a6ff);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
}
.container {
  background: #fff;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  width: 100%;
  max-width: 450px;
}
h2 { text-align:center; margin-bottom:20px; color:#333; }
label { display:block; margin:8px 0 4px; font-weight:bold; color:#444; }
input, select, textarea, button {
  width:100%; padding:10px; margin-bottom:12px;
  border:1px solid #ccc; border-radius:8px; font-size:14px;
}
button {
  background:#66a6ff; color:white; border:none; cursor:pointer; transition:0.3s;
}
button:hover { background:#0056d6; }
.success { color:green; font-weight:bold; text-align:center; margin-top:10px; }
.error { color:red; font-weight:bold; text-align:center; margin-top:10px; }
</style>
</head>
<body>
<div class="container">
  <h2>Survey Form</h2>
  <form id="surveyForm">
    <label>Name</label>
    <input type="text" name="name" required>

    <label>Phone</label>
    <input type="tel" name="phone" required>

    <label>Age</label>
    <input type="number" name="age" required>

    <label>Gender</label>
    <select name="gender" required>
      <option value="">Select Gender</option>
      <option>Male</option>
      <option>Female</option>
      <option>Other</option>
    </select>

    <label>Email</label>
    <input type="email" name="email" required>

    <label>State</label>
    <select name="state" id="state" required>
      <option value="">Select State</option>
      <option value="Andhra Pradesh">Andhra Pradesh</option>
      <option value="Telangana">Telangana</option>
    </select>

    <label>District</label>
    <select name="district" id="district" required></select>

    <label>Mandal</label>
    <select name="mandal" id="mandal" required></select>

    <label>Address</label>
    <textarea name="address" rows="3" required></textarea>

    <button type="submit">Submit</button>
  </form>
  <div id="message"></div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbz-g-vNMx2A9RoZfwKKvTuLkyGy_Py6deNQyDm8yuq6Fsu9JuSKIQNHKCP3fIQvimJCJA/exec";

const districtData={
  "Andhra Pradesh":{
    "Srikakulam":["a","b","c","d","e"],
    "Parvathipuram Manyam":["a","b","c","d","e"],
    "Vizianagaram":["a","b","c","d","e"],
    "Visakhapatnam":["a","b","c","d","e"],
    "Alluri Sitharama Raju":["a","b","c","d","e"],
    "Anakapalli":["a","b","c","d","e"],
    "Kakinada":["a","b","c","d","e"],
    "East Godavari":["a","b","c","d","e"],
    "Dr. B. R. Ambedkar Konaseema":["a","b","c","d","e"],
    "Eluru":["a","b","c","d","e"],
    "West Godavari":["a","b","c","d","e"],
    "NTR":["a","b","c","d","e"],
    "Krishna":["a","b","c","d","e"],
    "Palnadu":["a","b","c","d","e"],
    "Guntur":["Guntur","Tenali","Mangalagiri"],
    "Bapatla":["a","b","c","d","e"],
    "Sri Potti Sriramulu Nellore":["a","b","c","d","e"],
    "Prakasam":["a","b","c","d","e"],
    "Kurnool":["a","b","c","d","e"],
    "Nandyal":["a","b","c","d","e"],
    "Anantapur":["Anantapur","Dharmavaram","Guntakal"],
    "Chittoor":["Chittoor","Tirupati","Madanapalle"],
    "Sri Sathya Sai":["a","b","c","d","e"],
    "YSR Kadapa":["a","b","c","d","e"],
    "Annamayya":["a","b","c","d","e"],
    "Tirupati":["a","b","c","d","e"]
  },
  "Telangana":{
    "Adilabad": ["Adilabad", "Utnoor", "Boath"],
    "Bhadradri Kothagudem": ["Kothagudem", "Bhadrachalam", "Palvancha"],
    "Hyderabad": ["Secunderabad", "Amberpet", "Charminar"],
    "Jagtial": ["Jagtial", "Metpalli", "Korutla"],
    "Jangaon": ["Jangaon", "Narmetta", "Lingala Ghanpur"],
    "Jayashankar Bhupalpally": ["Bhupalpally", "Chityal", "Mulugu"],
    "Jogulamba Gadwal": ["Gadwal", "Alampur", "Itikyal"],
    "Kamareddy": ["Kamareddy", "Banswada", "Yellareddy"],
    "Karimnagar": ["Karimnagar", "Choppadandi", "Manakondur"],
    "Khammam": ["Khammam", "Wyra", "Sathupalli"],
    "Komaram Bheem Asifabad": ["Asifabad", "Sirpur", "Rebbena"],
    "Mahabubabad": ["Mahabubabad", "Bayyaram", "Narsimhulapet"],
    "Mahabubnagar": ["Mahabubnagar", "Jadcherla", "Bhoothpur"],
    "Mancherial": ["Mancherial", "Bellampalli", "Luxettipet"],
    "Medak": ["Medak", "Ramayampet", "Papannapet"],
    "Medchalâ€“Malkajgiri": ["Malkajgiri", "Keesara", "Ghatkesar"],
    "Mulugu": ["Mulugu", "Venkatapuram", "Eturnagaram"],
    "Nagarkurnool": ["Nagarkurnool", "Achampet", "Amrabad"],
    "Nalgonda": ["Nalgonda", "Devarakonda", "Miryalaguda"],
    "Narayanpet": ["Narayanpet", "Makthal", "Kosgi"],
    "Nirmal": ["Nirmal", "Laxmanchanda", "Dilawarpur"],
    "Nizamabad": ["Nizamabad", "Bodhan", "Armur"],
    "Peddapalli": ["Peddapalli", "Manthani", "Ramagundam"],
    "Rajanna Sircilla": ["Sircilla", "Vemulawada", "Ellareddypet"],
    "Ranga Reddy": ["Shamshabad", "Ibrahimpatnam", "Chevella"],
    "Sangareddy": ["Sangareddy", "Patancheru", "Zaheerabad"],
    "Siddipet": ["Siddipet", "Dubbak", "Husnabad"],
    "Suryapet": ["Suryapet", "Kodad", "Huzurnagar"],
    "Vikarabad": ["Vikarabad", "Tandur", "Parigi"],
    "Wanaparthy": ["Wanaparthy", "Ghanpur", "Pebbair"],
    "Warangal": ["Warangal", "Narsampet", "Parkal"],
    "Yadadri Bhuvanagiri": ["Bhongir", "Bibinagar", "Motakondur"]
  }
};

document.getElementById("state").addEventListener("change", function() {
  let districts = Object.keys(districtData[this.value] || {});
  let districtSelect = document.getElementById("district");
  districtSelect.innerHTML = "<option value=''>Select District</option>";
  districts.forEach(d => districtSelect.innerHTML += `<option value="${d}">${d}</option>`);
  document.getElementById("mandal").innerHTML = "<option value=''>Select Mandal</option>";
});

document.getElementById("district").addEventListener("change", function() {
  let state = document.getElementById("state").value;
  let mandals = districtData[state]?.[this.value] || [];
  let mandalSelect = document.getElementById("mandal");
  mandalSelect.innerHTML = "<option value=''>Select Mandal</option>";
  mandals.forEach(m => mandalSelect.innerHTML += `<option value="${m}">${m}</option>`);
});

document.getElementById("surveyForm").addEventListener("submit", async function(e){
  e.preventDefault();
  const formData = new FormData(this); 
  try {
    const res = await fetch(scriptURL, { method:"POST", body: formData });
    const result = await res.json();
    if(result.success){
      document.getElementById("message").innerHTML = `<p class="success">Form submitted! Your ID: ${result.id}</p>`;
      this.reset();
    } else {
      document.getElementById("message").innerHTML = `<p class="error">Error: ${result.error}</p>`;
    }
  } catch(err){
    document.getElementById("message").innerHTML = `<p class="error">Failed to submit: ${err.message}</p>`;
  }
});
</script>
</body>
</html>
